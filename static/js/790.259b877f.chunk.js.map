{"version":3,"file":"static/js/790.259b877f.chunk.js","mappings":"0NACA,EAAuB,qBAAvB,EAAwD,0BAAxD,EAAiG,6BAAjG,EAA0I,0BAA1I,EAA8K,wBAA9K,EAAkN,0B,SC0ElN,EAvEe,WAAO,IAAD,EACnB,GAA4BA,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACMC,GAAWC,EAAAA,EAAAA,MAGXC,EAAO,UAAGJ,EAAaK,IAAI,aAApB,QAA6B,GAEpCC,EAAG,0DAAsDF,EAAtD,+CAITG,EAAAA,EAAAA,YAAU,WAURC,MAAMF,EATU,CACdG,OAAQ,MACRC,QAAS,CACPC,OAAQ,mBACRC,cACE,gOAKHC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAb,IACbF,MAAK,SAAAE,GAAI,OAAIjB,EAAUiB,EAAKC,QAAnB,IACTC,OAAM,SAAAC,GAAY,OAAIC,QAAQC,IAAI,kBAAmBF,EAAnC,GACtB,GAAE,CAACZ,IAIJ,IAUMe,GAAiBC,EAAAA,EAAAA,UACrB,kBACEzB,EAAO0B,QAAO,SAAAC,GAAK,OACjBA,EAAMC,MAAMC,cAAcC,SAASvB,EAAQsB,cAD1B,GADrB,GAIA,CAAC7B,EAAQO,IAGX,OACE,4BACE,kBAAMwB,SApBgB,SAAAC,GAExB,GADAA,EAAIC,iBACkC,KAAlCD,EAAIE,OAAOC,aAAaC,MAC1B,OAAOhC,EAAgB,CAAC,GAE1BA,EAAgB,CAAEiC,GAAIL,EAAIE,OAAOC,aAAaC,QAC9CJ,EAAIM,cAAcH,aAAaC,MAAQ,EACxC,EAasCG,UAAWC,EAA9C,WACE,kBAAOC,KAAK,OAAOC,KAAK,eAAeH,UAAWC,KAClD,mBAAQD,UAAWC,EAAnB,6BAEU,KAAXxC,GACC,eAAIuC,UAAWC,EAAf,SACGhB,EAAemB,KAAI,SAAAhB,GAAK,OACvB,eAAmBY,UAAWC,EAA9B,UACE,SAAC,KAAD,CAAMI,GAAE,UAAKjB,EAAMU,IAAMQ,MAAO,CAAEC,KAAMzC,GAAxC,UACE,6BAAKsB,EAAMC,YAFND,EAAMU,GADQ,OAS3B,eAAIE,UAAWC,EAAf,+CAIP,C","sources":["webpack://react-homework-template/./src/pages/Movies/Movies.module.css?82ee","pages/Movies/Movies.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"Form\":\"Movies_Form__rKqDz\",\"FormInput\":\"Movies_FormInput__PLg0a\",\"ButtonSearch\":\"Movies_ButtonSearch__ok0YP\",\"MovieList\":\"Movies_MovieList__dk9gu\",\"MovieNo\":\"Movies_MovieNo__fpsQ-\",\"MovieItem\":\"Movies_MovieItem__Aftw-\"};","import { useEffect, useState, useMemo } from 'react';\nimport { Link, useLocation, useSearchParams } from 'react-router-dom';\nimport css from '../Movies/Movies.module.css';\n\nconst Movies = () => {\n  const [movies, setMovies] = useState([]);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const location = useLocation();\n\n  // Читаем строку, в зависимости от какого-то параметра\n  const movieId = searchParams.get('id') ?? '';\n\n  const url = `https://api.themoviedb.org/3/search/movie?query=${movieId}&include_adult=false&language=en-US&page=1`;\n\n  // \thttp запрос, чтобы получить список фильмов\n\n  useEffect(() => {\n    const options = {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n        Authorization:\n          'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4NTMwMzRiNTI4MTY1YzE4MjQwMTM2YzBmMzM4MjRjMCIsInN1YiI6IjY0ZTgzZWYzOTBlYTRiMDExZTc4ZTgwYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.juvbZHO-iDNDBDlHJ9qABEJJAP9FTBctGdor2APc3oc',\n      },\n    };\n\n    fetch(url, options)\n      .then(response => response.json())\n      .then(json => setMovies(json.results))\n      .catch(errorMessage => console.log('Error message: ', errorMessage));\n  }, [url]);\n\n  // Записываем\n\n  const updateQueryString = evt => {\n    evt.preventDefault();\n    if (evt.target.movieIdValue.value === '') {\n      return setSearchParams({});\n    }\n    setSearchParams({ id: evt.target.movieIdValue.value });\n    evt.currentTarget.movieIdValue.value = '';\n  };\n\n  // фильтр фильма\n  const filteredMovies = useMemo(\n    () =>\n      movies.filter(movie =>\n        movie.title.toLowerCase().includes(movieId.toLowerCase())\n      ),\n    [movies, movieId]\n  );\n\n  return (\n    <div>\n      <form onSubmit={updateQueryString} className={css.Form}>\n        <input type=\"text\" name=\"movieIdValue\" className={css.FormInput} />\n        <button className={css.ButtonSearch}>Search movie</button>\n      </form>\n      {movies !== '' ? (\n        <ul className={css.MovieList}>\n          {filteredMovies.map(movie => (\n            <li key={movie.id} className={css.MovieItem}>\n              <Link to={`${movie.id}`} state={{ from: location }}>\n                <p> {movie.title}</p>\n              </Link>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <h2 className={css.MovieNo}>Sorry we don't have this movie.</h2>\n      )}\n    </div>\n  );\n};\n\nexport default Movies;\n"],"names":["useState","movies","setMovies","useSearchParams","searchParams","setSearchParams","location","useLocation","movieId","get","url","useEffect","fetch","method","headers","accept","Authorization","then","response","json","results","catch","errorMessage","console","log","filteredMovies","useMemo","filter","movie","title","toLowerCase","includes","onSubmit","evt","preventDefault","target","movieIdValue","value","id","currentTarget","className","css","type","name","map","to","state","from"],"sourceRoot":""}